<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Giocatori - Club del Biliardo</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>Club del Biliardo</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="giocatori.html" aria-current="page">Giocatori</a>
      <a href="luoghi.html">Luoghi</a>
      <a href="partite.html">Partite</a>
      <a href="statistiche.html">Statistiche</a>
    </nav>
  </header>

  <main>
    <h2>Gestione Giocatori</h2>

    <form id="formGiocatore">
      <input type="hidden" id="giocatoreIndex">
      <input type="text" id="nomeGiocatore" placeholder="Nome" required>
      <input type="text" id="nicknameGiocatore" placeholder="Nickname" required>
      <input type="email" id="emailGiocatore" placeholder="Email">
      <input type="text" id="specialitaGiocatore" placeholder="SpecialitÃ ">
      <button type="submit">Salva Giocatore</button>
    </form>

    <h3>Lista Giocatori</h3>
    <div id="listaGiocatori"></div>
  </main>

  <script src="js/main.js"></script>
  <script>
    function aggiornaListaGiocatori() {
      const div = document.getElementById("listaGiocatori");
      div.innerHTML = "";

      if (giocatori.length === 0) {
        div.innerHTML = "<p>Nessun giocatore registrato</p>";
        return;
      }

      giocatori.forEach((g, i) => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <strong>${g.nome}</strong> (${g.nickname})<br>
          <small>${g.email || "-"}</small><br>
          <em>${g.specialita || "-"}</em><br>
          <button onclick="modificaGiocatore(${i})">Modifica</button>
          <button onclick="eliminaGiocatore(${i})" class="delete">Elimina</button>
        `;
        div.appendChild(card);
      });
    }

    document.getElementById("formGiocatore").addEventListener("submit", (e) => {
      e.preventDefault();
      const idx = document.getElementById("giocatoreIndex").value;
      const nome = document.getElementById("nomeGiocatore").value.trim();
      const nickname = document.getElementById("nicknameGiocatore").value.trim();
      const email = document.getElementById("emailGiocatore").value.trim();
      const specialita = document.getElementById("specialitaGiocatore").value.trim();

      if (idx) {
        giocatori[idx] = { nome, nickname, email, specialita };
      } else {
        giocatori.push({ nome, nickname, email, specialita });
      }

      salvaLocalStorage();
      aggiornaListaGiocatori();
      e.target.reset();
      document.getElementById("giocatoreIndex").value = "";
    });

    function modificaGiocatore(i) {
      const g = giocatori[i];
      document.getElementById("giocatoreIndex").value = i;
      document.getElementById("nomeGiocatore").value = g.nome;
      document.getElementById("nicknameGiocatore").value = g.nickname;
      document.getElementById("emailGiocatore").value = g.email;
      document.getElementById("specialitaGiocatore").value = g.specialita;
    }

    function eliminaGiocatore(i) {
      if (confirm("Vuoi eliminare questo giocatore?")) {
        giocatori.splice(i, 1);
        salvaLocalStorage();
        aggiornaListaGiocatori();
      }
    }

    document.addEventListener("DOMContentLoaded", aggiornaListaGiocatori);
  </script>
</body>
</html>
